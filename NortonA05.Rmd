---
title: "Assignment 5"
author: "Jenny Norton"
date: "9/19/2020"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Assignment 5

Load "Tidyverse" library.

```{r}
library(tidyverse)
```

## Question 1
For this problem, you will use readr to load the data you selected for Project 1. Write an appropriate read_csv command, using explicitly given col_ types to read the data, as we did in class.


Get the pathname to the file with the `here` package:
```{r}
library(here)
ufo_data_path <- here("Project1Data", "ufodata.csv")
```

<span style="color: green; font-size: 14pt">Note:  This indicates your data file was in a subfolder of the project called "Project1Data".  It wasn't, so I moved it into that folder in the repo.</span> 

Read it in with `readr`
```{r}
ufo_data <- read_csv(ufo_data_path)

```

Let's fix the columns.  I'm going to change date_documented to a date field.  Also the date_time column but I'll wait until we learn more about date and time and I'll leave it character for now.

```{r}
ufo_data <- read_csv(ufo_data_path,
                     col_types = 
                       cols(
  Date_time = col_character(),
  city = col_character(),
  `state/province` = col_character(),
  country = col_character(),
  UFO_shape = col_character(),
  length_of_encounter_seconds = col_double(),
  described_duration_of_encounter = col_character(),
  description = col_character(),
  date_documented = col_date (format = "%m/%d/%Y %*"),
  latitude = col_double(),
  longitude = col_double()
)
)

```

I have a parsing failure in latitude and length_of_encounter due to a trailing character but I won't worry about that now because there aren't that many.

## Question 2
Now that you have your data imported, select one variable in your data set, and perform a (very basic and preliminary) exploratory analysis of that variable. You might produce a graph of the distribution, or produce some summary statistics, or make a table. 

I want to see what shapes and how many of each are in the UFO_shape column.
```{r}
ufo_data %>%
  count(UFO_shape)
```

<span style="color: green; font-size: 14pt">I'd sort this by size--or even limit to large sizes:</span> 
```{r}
ufo_data %>%
  count(UFO_shape) %>%
  filter(n>500) %>% 
  arrange(desc(n))
```

```{r}
ggplot(ufo_data) +
    geom_bar(aes(x = UFO_shape)) +
               coord_flip() +
  labs(title = "UFO Data by Shape", x = "UFO Shape")
```

<span style="color: green; font-size: 14pt">This is probably also worth restricting the rare ones out.  I also got rid of the NAs:</span> 

```{r}
ufo_data %>%
  group_by(UFO_shape) %>%
  mutate(shape_count = n()) %>%
  filter(shape_count > 500, !is.na(UFO_shape)) %>%
  ungroup() %>%
ggplot() +
    geom_bar(aes(x = UFO_shape)) +
               coord_flip() +
  labs(title = "UFO Data by Shape", x = "UFO Shape")
```

## Question 3
Now select two variables in your data set, and examine the covariation between them. Again, you might use a graph, a table, or something else to explore the relationship. Describe the relationship you find. If anything requires cleaning before your analysis, perform that step as well, and mention it.

```{r}
colnames(ufo_data)
```

Let's see the State the sighting happened.
```{r}
table(ufo_data$`state/province`)
```

```{r}
ufo_data %>%
  filter(!is.na(UFO_shape), !is.na(`state/province`), `state/province` == "ny") %>%
  ggplot((aes(x = `UFO_shape`, y = `state/province`))) +
  geom_point() +
  geom_smooth(method = "lm", se = FALSE) +
  coord_flip() +
  labs(title = "NY State UFO sightings")
```

I'm not sure why this isn't doing what I want.  I wanted to see the number of UFO Sightings in NY distributed by UFO Shape.

<span style="color: green; font-size: 14pt">If you're wanting a dot plot for shape counts, you'll need a count value.  You could generate one using a mutate and then pass to ggplot:</span> 

```{r}
ufo_data %>%
  filter(!is.na(UFO_shape), !is.na(`state/province`), `state/province` == "ny") %>%
  group_by(UFO_shape) %>%
  mutate(Shape_Count = n()) %>%
  ungroup() %>%
  ggplot((aes(x = UFO_shape, y = Shape_Count))) +
  geom_point() +
  coord_flip()  +
  labs(title = "NY State UFO sightings")
```

<span style="color: green; font-size: 14pt">(Also, a smoother here doesn't make sense.)</span> 


```{r}
ufo_data %>%
  filter(!is.na(UFO_shape), !is.na(`state/province`), `state/province` == "ny") %>%
ggplot() +
      geom_bar(aes(x = UFO_shape)) +
               coord_flip() +
  labs(title = "NY State UFO Data by Shape", x = "UFO Shape", y = "Number in NY")
```
That looks better!